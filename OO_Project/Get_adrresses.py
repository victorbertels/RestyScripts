import requests
import json
import time
import datetime
import csv  




square = ["6364a47ce696e917271a1a49",
"634df0d9af56bed00770e5a4",
"634ce6f2830ce0d1a3a1e025",
"634cde7f6293899f1aad1d9b",
"634cdaf5efea6f1ea8c036be",
"6348cd03021231e5c74f6584",
"633669a4549b14c8bc9bf216",
"63364be4dbae8ce95cf99dba",
"63364bcc0953c79d3ac965cf",
"633391c18e89b1c2c6cbdb5b",
"633292e059dd9071a44080cc",
"63314ce556534b87ac6e48ba",
"6328046351e46f84c3d56605",
"6326d7d5875542302740f2ca",
"631e9d73cef676ae76495c24",
"631e9be69f4acd4c70974a40",
"631593a8ebe1fb2b5ece5b91",
"631150ea0d19ca11f1e63b43",
"63104c6d56c81177337a58e3",
"63104c54ac6ae8ff7bb8b375",
"6310144fd9ddd97549e7b606",
"630eef1e826cf28152023b2a",
"630eea9969bcd44f1f8a901c",
"630eea7f167718becec0a6a8",
"630da707190fbad66e4ac6ed",
"6308506bcae8c9ac6bf23088",
"630708c4c96c2174e50a959e",
"6307035a1730d8176262ea52",
"63059cf79d64dc0f7a0e3774",
"63042202194f9f682cc07ed5",
"62fae6ebafe1d05bd8bd484a",
"62f9a69e06028644dd357583",
"62f99ded8fb427521e9b28c6",
"62f5aef56ce91acd9c918947",
"62eb6b190a29969fede725b9",
"62e9253b008b27cb6c13e3a5",
"62e8cd702ea7a72ee73a6268",
"62e8cd27bc89a24c9de65ad0",
"62e8b8f00cb52ff8985d88b3",
"62e349586b0567dd3a4f2e40",
"62e0dc037f6aefc24db87957",
"62df8805ed6eb0c92a1fc140",
"62df1de3a3eebc8c9aaa5a5c",
"62de23704f5f40a8ca2e49fd",
"62d7b5374e5b46aaaae456b1",
"62d5fcda5b9551ef8c3af8c0",
"62d5f1bc443bf088110e89ae",
"62d4cdeec95c03465956b012",
"62d0ffb1b06a651342181280",
"62d0fa32bbddc0f7339477d5",
"62d0dcbaf11ff9de63b0a574",
"62cf9c2ddce477f0ccee6f3b",
"62cd6305ad42f7f843010e9a",
"62cbb7c089a8c13ba1b8a7db",
"62bce8c5357069fc0fe762c4",
"62bbb3b310f087135f4f0f9c",
"62bbb3a366bb8f2998c594d6",
"62bbb3979263b35dc049d161",
"62bbb38ac26c33e4f06da12c",
"62aaaac9019afdaf09968e0d",
"62a95c9ced30334a18b407b4",
"62a2a05c03d0e3328096431d",
"62a164dc936f3420f652d9bc",
"62a01bc6936f3420f69609b9",
"62a01ba1eab9a8541e868c79",
"62a0112176dc18da60386b60",
"629ff6629bbea5ff85d50394",
"629e011f2ceef2f33470c12a",
"629703b2db64af6a9e4b15b0",
"628b6d8b4409f7d54c141d53",
"628b2f6bef588a2b8f8e5af1",
"628b2dd0814d8e28fa20bedf",
"6284994de9447fa3fd53df04",
"62831fa23f46902ccd12e63b",
"627b163839b095ede81ad4aa",
"6272149111412d5c643ee3ac",
"62709348079e8b5dcd87dc15",
"626f889f1d7eff3b29b4fda2",
"626f4037cdb7d1897ff8af81",
"626b8b003d118ea02469aff5",
"6269d9207fe4f7e769c4075a",
"6267567cb02b3807af8c82e8",
"62624c5927c7a306c63cb336",
"6260eb8b27c7a306c646bbc3",
"625530c7d8ad21c6669a52ee",
"625513182db26405b07b59ed",
"625003abe3d4c5c3b291fe73",
"624d173395fe6fb4d53ce6c2",
"624a26f5410e1326396d3409",
"62427072dfc415632b775111",
"62426f0adfc415632b760721",
"6237aeaec0d0ef963e56bff9",
"6237ae52c0d0ef963e566d42",
"6233de47ae9af2edcd419801",
"6232c76a9cea828c5a4eacc6",
"6231f1b9eb8b5ed87a211ac6",
"6227d22a526c61c52ab11126",
"62268761526c61c52adb90d5",
"62254d6396ff2695501f15fc",
"6220729f0df00247dba8f78e",
"621f79c712a78b3c45137889",
"621d6256ef345dc1fc05a0a2",
"621c6613d156fa94594f33aa",
"62156dc46b4e6fb280fd1a1f",
"62142c8a9e59040f119cf798",
"620c4d2252d23ead2c06b80e",
"620b2edf255bd2d71ca9c22f",
"62046419247d0df1bac8f9dc",
"6201c71685cc6698f5266265",
"62006fd7c89575706e700c78",
"61fb40cc1d8177fb7213d6dc",
"61f71e6092922b92b93c91cc",
"61ede34844fc487ce2b87e82",
"61e8f83fdcdfa812dd92daf2",
"61dfa58cc4527624e9934a56",
"61dbfbf05d9725d1ddefa522",
"61b7388c11a9b6a0fcddf89a",
"61adaa744cca9a67ddd01969",
"619c10f3925883eb5b61005c",
"6195f5bd0ed724c234cd63c8",
"6194b6acc035ba4a9c8d3114",
"619499f5c441936f0a255602",
"6193eaffc441936f0acdf35f",
"61920b6fd514c9047cdf931a",
"618ed44dadbbcd1e8abd1127",
"618ed3cdd514c9047c311950",
"618c51704c31c7c0efbb10f7",
"618bbd924f5041f42266da0c",
"618a3b7cd8a279d63636760b",
"618a3b3151f3629999cb1f79",
"618a3af07c66eb20b76e0eea",
"618a24f4507b660c4717990d",
"618a1dacd8a279d636219ea0",
"61879c18c00e4414db1e066b",
"61830bc20505c718a323eee6",
"61830b89795c386cf176d92b",
"61830b51182bbf802dc1bcb0",
"61814e415b3dc6af636b722f",
"617e413a634351dab5c5e170",
"6179457da5e9ac645bee50e3",
"61794547174edc2909d557a4",
"6177bfd6bf637f73f3269868",
"6177bf8ea97291f2c1999893",
"6177beea9a5e65f0d6ecbd6a",
"61764e94dff33c7fbd34d523",
"617400d13b2f31fda4de3a90",
"616ece296e2658a3e13d1423",
"616e5f37a256b18c6431241e",
"616927e10affaea744293e61",
"61681b8541e2dd38e714a85e",
"61681af1c984ea317e4ce02a",
"61557aa3099675003318a598",
"615179c2072a749c2fe5bbb6",
"61500b76d0872782d9dd73b8",
"61486d5e0d2bd39e811a7369",
"614457119418d98edcfdafbc",
"613ff6b07bc712c474712e95",
"613dd9da285713fe2b24876e",
"6139d50ba107771398d2ec20",
"6139cdb112a8a51cd12c5794",
"61389aa9dc560f1d5e8fcec6",
"613740dbdb926b6c23b5668d",
"6134afda6a4d13c42acf3429",
"61326f4839f1f6660b547bcf",
"612e49764e7b589e9c47f68f",
"612b7c865e8c20152f4639ea",
"611fcf0efcbba99b0b0997f8",
"611b70a36bc525595ccd84ac",
"611520c140fc9a85531958cc",
"611379246ddaf460e9cbb432",
"6111f5d65389ff89bb2c83e0",
"6111a3c45389ff89bb21bf8a",
"610d0463709ef2ce1c57c7c7",
"60ffb7e563965142b45b5340",
"60ff481435b969fe2699af45",
"60fe6f7488b4e5bc0c539534",
"60fa95ef1a6db5e664a40d55",
"60f81f818d9108b66b569699",
"60e8227400c9e52ce746bda4",
"60e8220d01b9731ff20e46ac",
"60df6568908216a05f88a09a",
"60dca5c676df3ceaa706f781",
"60dad34c89280616d08164e3",
"60b672b780016dfeb3bd767c",
"609be109ed55344e224b819d",
"609378d3481dce29ea8c01d7",
"6092ca7b9f1900596d937753",
"60759e4c6c7e64e8695a3c1e",
"6063bd834c0a5ac33ff0b372",
"60404151a67879739be72dde",
"603d7d84e50df5f098b711ec",
"603cc9263edf5280151a0d1b",
"603cb143ee5752f56de736ab",
"602d24ed8a0a621797a8b436",
"602ccff5659a4a2c06c167ff",
"6025aad41ef0dc45b0f1435b",
"601b2e9ebe7139969a9da6ea",
"5ffc4b5fef54e5b05ef61d61",
"5ffc4b50ec81ee83791fdf3d",
"5ffc4b3def54e5b05ef6125d",
"5ff42478c6cc4ade7267d831",
"5ff42420091382900d7e462c",
"5fd2baee84bab5ffaf279ec0",
"5fbda35fed229744e45e2021",
"5fb6cc44fb032ac07d8bee08",
"5f98b8d87dcd573b71533430",
"5f8e11c1529d2df6da872a3f",
"5f7d8753f9c64670ab088569",
"5f6dacb383d1e220308b795a",
"5f6daaf20f028e3498030e5c",
"5f6daa6b0f028e349802f714",
"5f6da65e0f028e349802660c",
"5f6da6340f028e3498026541",
"5f6da60483d1e220308aaa6a",
"5f6da5d60f028e3498026376",
"5f6da58483d1e220308a9b0d",
"5f581d2cafbd08f64640beea",
"5f581d180385fee79f85988f",
"5f4d008b47277ebd9821c9e4",
"5f45dd25c1ffc75a76d626c8",
"5f45dd0fc1ffc75a76d626b7",
"5f45db27c1ffc75a76d6257a",
"5f45dab05d04d0f559156152",
"5f45da715d04d0f55915612a",
"5f45da35c1ffc75a76d6251a",
"5f45d9dcc1ffc75a76d624d5",
"5f45d9805d04d0f5591556e7",
"5f45d8a25d04d0f559155695",
"5f45d768c1ffc75a76d61fe2",
"5f3a9d9f1d3f1ba68383287c",
"5f3a9d871d3f1ba6838324f1",
"5f343d677c2ed0e078220b3a",
"5f343d2e67b29524d3dd0e21",
"5f234c1c974acbfeee5d3a60",
"5f118de3f3494b8ce317d174",
"5f051c1c5911ba641bbd3d2a",
"5efb8dc1a195432499a8f3d4",
"5efb8daaa05ce1c014c61ade",
"5efb8cc0a195432499a8f19e",
"5efa6409d377995acc716c92",
"5ef1098494f64b0001710678",
"5ef1074094f64b00017083c2",
"5eb091f787b1bf0001c3d368",
"633cbbb3eaf2b5251340210a",
"6326d8b58755423027419fc7",
"6323d606251751c33c8e0fc4",
"631abddbab0801315b67dc35",
"6315da0df210683a03131302",
"6315d9e36e5dbb0803a0007f",
"6310357fece2369b86f18361",
"62fb3a514002cf3efb1d50c9",
"62fb3a3406028644dd3a6e62",
"62fb3a088e258aa561ac8bbd",
"62fb15b58888d732ada560da",
"62fb03318e258aa56180a912",
"62f597a38a9a5afb45f8efce",
"62de2ff161cb963df1c2f031",
"62d8f5f173da213e29bffdaf",
"62d4f00ef11ff9de632d1793",
"62d4efd7073da7f3b6fef431",
"62d4efb745c8e509f3577afd",
"62cd07782871bf809f8fa263",
"62ba4098677c223266a54c28",
"62b94d8322c9f964a95b1536",
"62b94d68e760de5607808fbe",
"62b94d03362f63f030210492",
"62b94cbbe760de56077fb342",
"62b14d58f6df2a367197ca8e",
"62b14d44e7833d02524f23c7",
"62b14d34030756c6236d7481",
"62b14d2608c134692ea991ef",
"62b14d054f7a3c39023708e0",
"62b14cf525352de37fda1a11",
"62b14ce24f7a3c390236f385",
"62b14cd208e75ff98dfe394d",
"62b14c0508c134692ea84b28",
"62b14bd6e7833d02524df8b1",
"62b14bc008c134692ea7f786",
"62b14876f6df2a367193f5ac",
"62b14820030756c623699ec4",
"62b147ff4f7a3c3902337792",
"62b147a9e7833d02524ab691",
"62a1e672d55d9164ba0a85e2",
"62846cd68dccae5c7ff68748",
"62846711e9447fa3fd2e8634",
"627490c033e2cb315b66c543",
"62748ff88f18138b879a38fa",
"62748d457d573e73341c1a20",
"62748c918f18138b8797dd93",
"626b18ab1c618e0d31432402",
"624e5a8b1b899cd5b505f380",
"6243b0678b23f04eabc5b7e2",
"6237b85f401528c5962538d5",
"6226c40a94802d9e23e65e6c",
"622009d8c34b8f0326050ee4",
"621c16eb794178cc769ee878",
"6212cbc001e5e6c08dc7bc76",
"6212cb798244bd3e36e6a86d",
"6212cb3501e5e6c08dc79915",
"620d686a53b83686db36254a",
"6204b5adcd9250254a4b45f5",
"61e4b3fd6374c90691d6ccac",
"61de21020706d58e10473736",
"61db7bf45d9725d1dda820af",
"61d62c081ad47d578507add8",
"61cbf2208c8522448961c281",
"61b8774363d486cbf8dbfe6f",
"61936771718961ac4c76ac69",
"61794641a5e9ac645bef8e27",
"615ee1cf31532cefbccb5cf5",
"6112d1a8b78b0a6e334ddaa9",
"60dafc4d64b7f7fecf3bbe25",
"5ff5efbfe3dea24f32d5020c",
"5fecb492281ecbb0733ef07f",
"5f9020cd7395be51033332f3",
"5f7f412b8ddd508635587093",
"5f4d9f51b517880d2d603efa",
"5ece6b7e43df2800018be805",]



with open(f'/Users/victorbertels/Desktop/OOPRoject/AddressesSquare.csv', 'w', newline='') as f:
    header = ['Name','Address','City', 'PostalCode', 'Country', 'State']
    writer = csv.DictWriter(f, fieldnames=header)
    writer.writeheader()



    for link in square:
        get_uuid = pcli.channelLinks.list_all(q={"_id" : link})
        for uid in get_uuid:
            uuid = uid.channelSettings.storeId
            url = f"https://api.uber.com/v1/eats/stores/{uuid}"
            payload={}
            headers = {
            'Authorization': 'Bearer IA.VUNmGAAAAAAAEgASAAAABwAIAAwAAAAAAAAAEgAAAAAAAAGMAAAAFAAAAAAADgAQAAQAAAAIAAwAAAAOAAAAYAAAABwAAAAEAAAAEAAAABbbZQHiEzIf20yK64cFYc08AAAALgylOHnoBcOIAFQhkk4IMFx5uyF4bS5ANTv7RvYI6_HMmgiC8vz9gu3VYNSbt2BM_5iyoJrcytjzieORDAAAAAFelDUM-txTQG5czSQAAABiMGQ4NTgwMy0zOGEwLTQyYjMtODA2ZS03YTRjZjhlMTk2ZWU'
            }
            response = requests.request("GET", url, headers=headers, data=payload)
            try:
                jsonrespsone = response.json()
                name = jsonrespsone.get("name")
                location_address = jsonrespsone.get("location")["address"]
                city = jsonrespsone.get("location")["city"]
                postalcode = jsonrespsone.get("location")["postal_code"]
                country = jsonrespsone.get("location")["country"]
                state = jsonrespsone.get("location")["state"] 
                print(name , location_address , city , postalcode , country , state)
                writer.writerows({"Name" : name , "Address" : location_address , "City" : city , "PostalCode" : postalcode , "Country" : country , "State" : state})
                break



            # print(name)
            # for item in jsonrespsone:
            #     name = item["name"]
            #     print(name)



            except:
                print("no uid found, skip this one")


